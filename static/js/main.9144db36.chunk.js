(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{162:function(e,t,a){e.exports=a(470)},470:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),o=a(20),i=a(19),u=a(21),s=a(23),d=a(22),m=a(24),p=a(2),y=a(95),f=a.n(y),h=(f.a.initializeApp({apiKey:"AIzaSyAAEydqTs7fZg30Q4JRcqYG99ttG4QwiwE",authDomain:"monetary-47f4a.firebaseapp.com",databaseURL:"https://monetary-47f4a.firebaseio.com",projectId:"monetary-47f4a",storageBucket:"monetary-47f4a.appspot.com",messagingSenderId:"324201016162",appId:"1:324201016162:web:3eb5ffcbf1fdad7f"}),f.a.database()),g=function e(){Object(i.a)(this,e)};g.getDataList=function(e,t){var a=h.ref(e);return a.on("value",function(e){var a=e.val(),n=[];Object.keys(a||{}).forEach(function(e){n.push(a[e])}),t(n)}),a},g.pushData=function(e,t){var a=h.ref(e).push(),n=a.key;return a.set(t),n},g.remove=function(e,t){return h.ref("".concat(t,"/").concat(e)).remove()},g.getUniqueDataBy=function(e,t,a){var n=h.ref(e+"/"+t),r={};n.once("value",function(e){if(e){var t=e.val();Object.keys(t||{}).forEach(function(e){r[e]=t[e]})}else a(null)}).then(function(){a(r)})},g.updateData=function(e,t,a){return h.ref("".concat(t,"/").concat(e)).set(Object(o.a)({},a))};var E=[{code:"USD",singular:"D\xf3lar Americano",plural:"D\xf3lares Americano"},{code:"BRL",singular:"Real",plural:"Reais"},{code:"EUR",singular:"Euro",plural:"Euros"},{code:"ARS",singular:"Peso Argentino",plural:"Pesos Argentino"},{code:"CAD",singular:"D\xf3lar Canadense",plural:"D\xf3lares Canadense"},{code:"GBP",singular:"Libra Esterlina",plural:"Libras Esterlina"}],v="/monetary",b={accountsTransaction:{name:"Fazer uma transa\xe7\xe3o de moedas",path:"".concat(v,"/accounts-transaction")},accountsTransfer:{name:"Fazer uma transfer\xeancia entre contas",path:"".concat(v,"/accounts-transfer")},accountsList:{name:"Listagem de carteiras",path:"".concat(v,"/accounts")},accountsEntry:{name:"Registrar uma entrada",path:"".concat(v,"/accounts-entry")},accountsOut:{name:"Registrar uma sa\xedda",path:"".concat(v,"/accounts-out")},accountsForm:{name:"Cadastro de carteira",path:"".concat(v,"/account")}},T={name:"Edi\xe7\xe3o de carteira",path:"".concat(v,"/account/:id")},C={name:"Relat\xf3rio",path:"".concat(v,"/report/:id/:code"),simplePath:"".concat(v,"/report")},S={name:"Home",path:"".concat(v,"/")},O=("".concat(v,"/account-transfer-list/:id'"),{name:"Listagem de transa\xe7\xf5es",path:"".concat(v,"/account-transaction-list/:id"),simplePath:"".concat(v,"/account-transaction-list/")}),w={loading:!0,id:null,description:"",balances:new Array,currency:{code:"",singular:""},value:0},A=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state=w,a.componentWillMount=function(){a.getDate()},a.getDate=function(){var e=a.props.match.params.id;e?g.getUniqueDataBy("accounts",e,function(t){a.setState(Object(o.a)({},t,{id:e,currency:{code:"",singular:""},value:0,loading:!1}))}):a.setState({loading:!1})},a.onAddBalance=function(){var e=a.state,t=e.value,n=e.currency,r=e.balances;a.setState({balances:r.concat([{value:t,code:n.code}])},a.handleAdd)},a.submit=function(e){e.preventDefault(),a.handleAdd()},a.handleAdd=function(){var e=a.state,t=e.id,n=e.description,r=e.balances;if(t)g.updateData(t,"accounts",{id:t,description:n,balances:r}).then(a.getDate);else{var c=g.pushData("accounts",{description:n,balances:r});c&&g.updateData(c,"accounts",{id:c,description:n,balances:r}).then(function(){return a.props.history.push("".concat(b.accountsForm.path,"/").concat(c))})}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.id,n=t.description,c=t.currency,l=t.value,o=t.balances,i=t.loading,u=c.code||"";return i?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},a?"Editar a conta '".concat(n,"'"):"Adicionar nova conta"),r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(p.TextField,{style:{clear:"left",float:"left",display:"inline-block",marginTop:"2vh !important"},type:"text",value:n,label:"Descri\xe7\xe3o",fullWidth:!0,required:!0,onChange:function(t){return e.setState({description:t.target.value})}}),r.a.createElement(p.Button,{type:"submit",color:"primary",style:{marginTop:"20px",display:"inline-block"}},a?"Editar conta":"Adicionar conta")))),!!a&&r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},"Adicionar saldo"),r.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},r.a.createElement(p.InputLabel,{htmlFor:"currency-select"},"Moeda"),r.a.createElement(p.Select,{style:{width:200,marginRight:8},value:u,onChange:function(t){var a=E.find(function(e){return e.code===t.target.value});a&&e.setState({currency:{code:a.code,singular:a.singular}})},inputProps:{name:"currency",id:"currency-select"}},r.a.createElement(p.MenuItem,{value:""},r.a.createElement("em",null,"Selecione uma moeda")),E.map(function(e){return r.a.createElement(p.MenuItem,{value:e.code},e.singular)})),r.a.createElement(p.TextField,{type:"number",value:l,label:"Saldo",required:!0,onChange:function(t){return e.setState({value:+t.target.value})}})),r.a.createElement(p.Button,{onClick:this.onAddBalance,color:"primary",style:{marginTop:"20px",display:"inline-block"}},"Adicionar"))),!!o.length&&r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},"Saldos vinculados na conta"),r.a.createElement(p.Table,null,r.a.createElement(p.TableHead,null,r.a.createElement(p.TableRow,null,r.a.createElement(p.TableCell,null,"Moeda"),r.a.createElement(p.TableCell,{align:"right"},"Saldo"))),r.a.createElement(p.TableBody,null,o.map(function(e){var t=E.find(function(t){return t.code===e.code}),a=new Intl.NumberFormat("pt-BR",{style:"currency",currency:e.code});return r.a.createElement(p.TableRow,{key:e.code},r.a.createElement(p.TableCell,{align:"left"},!!t&&t.singular),r.a.createElement(p.TableCell,{align:"right"},a.format(e.value)))}))))))}}]),t}(n.Component),j=a(42),D=a.n(j),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={accounts:new Array,viewList:new Array,loading:!0},a.componentWillMount=function(){g.getDataList("accounts",function(e){a.setState({accounts:e,viewList:e,loading:!1})})},a.onSearch=function(e){var t=a.state.accounts;e&&e.target&&e.target.value?a.setState({viewList:t.filter(function(t){return t.description.indexOf(e.target.value)>=0})}):a.setState({viewList:t})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.viewList;if(t.loading)return null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Input,{type:"search",placeholder:"Buscar...",style:{marginLeft:"10%",marginRight:"10%",width:"80%"},onChange:function(t){return e.onSearch(t)}}),r.a.createElement(p.GridList,{cellHeight:150,cols:4},a.map(function(t){return r.a.createElement(p.GridListTile,{key:t.id,cols:"xs"===e.props.width?4:"sm"===e.props.width?2:"md"===e.props.width?2:1},r.a.createElement(p.Card,{style:{margin:16}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},t.description),r.a.createElement(p.Typography,null,"Moedas: ".concat((t.balances||[]).length)),r.a.createElement(p.Button,{color:"inherit",onClick:function(){return e.props.history.push("".concat(b.accountsForm.path,"/").concat(t.id))}},"Editar"),r.a.createElement(p.Button,{color:"primary",onClick:function(){return e.props.history.push("".concat(O.simplePath).concat(t.id))}},"Ver transa\xe7\xf5es"))))})))}}]),t}(n.Component),R=D()()(M),I=function(e){var t=e.value,a=e.onChange,n=e.name,c=e.selectDefault,l=e.items,o=e.itemKey;return r.a.createElement(p.Select,{value:t,onChange:function(e){return a(e.target.value)},displayEmpty:!0,fullWidth:!0,name:n,style:{marginTop:16}},r.a.createElement(p.MenuItem,{value:""},r.a.createElement("em",null,c)),l.map(function(e){return r.a.createElement(p.MenuItem,{value:e.id},e[o||"description"])}))},F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,accounts:new Array,currencyFrom:"",currencyTo:"",from:"",to:"",quotation:0,quantity:0,description:""},a.componentWillMount=function(){g.getDataList("accounts",function(e){a.setState({accounts:e,loading:!1})})},a.addTransaction=function(e,t,a,n,r,c,l,i,u){return t.some(function(e){return e.code===a})||t.push({code:a,value:0,transactions:new Array}),t.some(function(e){return e.code===n})||t.push({code:n,value:0,transactions:new Array}),t.map(function(t){if(t.code===a){var s=t.transactions||new Array,d=r*c;return Object(o.a)({},t,{value:e?t.value-d:t.value+d,transactions:s.concat([{date:(new Date).toISOString(),type:"TRANSACTION",quotation:c,sended:e,value:d,currency:a,to:i,from:u,description:l}])})}if(t.code===n){var m=t.transactions||new Array,p=r;return Object(o.a)({},t,{value:e?t.value+p:t.value-p,transactions:m.concat([{date:(new Date).toISOString(),type:"TRANSACTION",quotation:c,sended:!e,value:p,currency:n,to:i,from:u,description:l}])})}return t})},a.submit=function(e){e.preventDefault();var t=a.state,n=t.accounts,r=t.from,c=t.to,l=t.description,i=t.quotation,u=t.quantity,s=t.currencyFrom,d=t.currencyTo,m=n.find(function(e){return e.id===r}),p=n.find(function(e){return e.id===c});if(m&&p){var y=m.balances||new Array,f=p.balances||new Array,h=a.addTransaction(!0,y,s,d,u,i,l,c,r),E=a.addTransaction(!1,f,s,d,u,i,l,c,r),v=[g.updateData(r,"accounts",Object(o.a)({},m,{balances:h})),g.updateData(c,"accounts",Object(o.a)({},p,{balances:E}))];Promise.all(v).then(function(){return a.props.history.push(b.accountsList.path)})}},a.getAccountMessage=function(e,t){return e?"Selecione a moeda que sair\xe1 da conta ".concat(t):"Selecione a moeda que sair\xe1 da conta"},a.findCurrencyByCode=function(e){return!!e&&E.find(function(t){return t.code===e})||{code:"",singular:"",plural:""}},a.getFormatedCurrency=function(e,t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:t}).format(e)},a.getMonetaryItems=function(e){return e.map(function(e){var t=a.findCurrencyByCode(e.code);return{id:e.code,description:"".concat(t?t.singular:e.code," (Valor m\xe1ximo: ").concat(a.getFormatedCurrency(e.value,e.code),")")}})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.accounts,c=t.from,l=t.to,o=t.currencyFrom,i=t.currencyTo,u=t.quotation,s=t.quantity,d=t.description,m=!!c&&n.find(function(e){return e.id===c}),y=!!l&&n.find(function(e){return e.id===l}),f=m&&m.balances?m.balances:[],h=y&&y.balances?y.balances:[],g=this.getAccountMessage(!!c,m.description),E=this.getMonetaryItems(f),v=this.getAccountMessage(!!l,y.description),b=this.getMonetaryItems(h),T=this.findCurrencyByCode(i);return a?null:r.a.createElement("div",{style:{paddingBottom:16}},r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},"Carteira compradora"),r.a.createElement(I,{value:c,onChange:function(t){return e.setState({from:t,currencyFrom:""})},name:"De",selectDefault:"Selecione a carteira de compra",items:n}),r.a.createElement(I,{value:o,onChange:function(t){return e.setState({currencyFrom:t})},name:"Moeda da carteira de compra",selectDefault:g,items:E}))),r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},"Carteira vendedora"),r.a.createElement(I,{value:l,onChange:function(t){return e.setState({to:t,currencyTo:""})},name:"Para",selectDefault:"Selecione carteira vendedora",items:n}),r.a.createElement(I,{value:i,onChange:function(t){return e.setState({currencyTo:t})},name:"Moeda da carteira vendedora",selectDefault:v,items:b}))),!!(c&&l&&o&&i)&&r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},"Valor e cota\xe7\xe3o"),r.a.createElement(p.TextField,{type:"number",value:s,label:"Quantidade de ".concat(T.plural," que ser\xe1 vendido"),fullWidth:!0,required:!0,style:{marginTop:16},onChange:function(t){return e.setState({quantity:+t.target.value})}}),r.a.createElement(p.TextField,{type:"number",value:u,label:"Cota\xe7\xe3o do ".concat(T.singular," que ser\xe1 usado na venda"),fullWidth:!0,required:!0,style:{marginTop:16},onChange:function(t){return e.setState({quotation:+t.target.value})}}),r.a.createElement(p.TextField,{type:"text",value:d,label:"Descri\xe7\xe3o",fullWidth:!0,style:{marginTop:16},onChange:function(t){return e.setState({description:t.target.value})}}))),!!(c&&l&&o&&i&&s&&u)&&r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},"Resumo e confirma\xe7\xe3o"),r.a.createElement("br",null),r.a.createElement(p.Typography,null,"Ser\xe1 transferido ".concat(this.getFormatedCurrency(s,i),' da conta  "').concat(y?y.description:"",'" e adicionado na conta "').concat(m?m.description:"",'". E ser\xe1 transferido ').concat(this.getFormatedCurrency(s*u,o),' da conta "').concat(m?m.description:"",'" e adicionado na conta "').concat(y?y.description:"",'"')),r.a.createElement(p.Button,{type:"submit",color:"primary",style:{marginTop:"20px",display:"inline-block"}},"Transferir")))))}}]),t}(n.Component),B=a(72),x=a.n(B),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={account:null,loading:!0},a.componentWillMount=function(){var e=a.props.match.params.id;g.getUniqueDataBy("accounts",e,function(t){a.setState({account:Object(o.a)({},t,{id:e}),loading:!1})})},a.sortFunction=function(e,t){return+(t.date>e.date)-(t.date<e.date)},a.renderButton=function(e,t,n){var c=e.filter(function(e){return e.currency===t&&"TRANSACTION"===e.type&&e.to===n&&e.sended});return c&&c.length?r.a.createElement("div",{style:{flexGrow:0}},r.a.createElement(p.Button,{onClick:function(){return a.props.history.push("".concat(C.simplePath,"/").concat(n,"/").concat(t))}},"Relat\xf3rio")):r.a.createElement("div",null)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.account;if(t.loading||!a)return null;var n=a||{},c=n.balances,l=void 0===c?[]:c,o=n.id,i=(l||[]).reduce(function(e,t){return e.concat(t.transactions||[])},new Array);return r.a.createElement("div",{style:{paddingBottom:16}},!!l&&!!l.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Typography,{style:{padding:8},variant:"headline",component:"h2"},"Moedas vincuadas a essa conta"),r.a.createElement(p.GridList,{cellHeight:110,cols:4},l.map(function(t){var a=new Intl.NumberFormat("pt-BR",{style:"currency",currency:t.code}),n=E.find(function(e){return e.code===t.code});return r.a.createElement(p.GridListTile,{key:t.code,cols:"xs"===e.props.width?4:"sm"===e.props.width?2:"md"===e.props.width?2:1},r.a.createElement(p.Card,{style:{margin:2}},r.a.createElement(p.CardContent,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(p.Typography,{variant:"headline",component:"h2"},n?n.singular:t.code),r.a.createElement(p.Typography,null,"Valor: ".concat(a.format(t.value)))),e.renderButton(i,t.code,o)))))}))),!!i&&!!i.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Typography,{style:{padding:8},variant:"headline",component:"h2"},"Movimenta\xe7\xf5es vinculadas com essa conta"),r.a.createElement(p.Table,null,r.a.createElement(p.TableHead,null,r.a.createElement(p.TableRow,null,r.a.createElement(p.TableCell,null,"Data"),r.a.createElement(p.TableCell,null,"Moeda"),r.a.createElement(p.TableCell,null,"Valor"),r.a.createElement(p.TableCell,null,"Tipo"),r.a.createElement(p.TableCell,null,"Descri\xe7\xe3o"))),r.a.createElement(p.TableBody,null,i.sort(this.sortFunction).map(function(e,t){var a,n=new Intl.NumberFormat("pt-BR",{style:"currency",currency:e.currency});return"INITIAL"===e.type?a="Dep\xf3sto inicial":"MOVEMENT"===e.type?(e.sended&&(a="Sa\xedda"),e.sended||(a="Entrada")):"TRANSFER"===e.type?(e.sended&&(a="Transfer\xeancia - Sa\xedda"),e.sended||(a="Transfer\xeancia - Entrada")):"TRANSACTION"===e.type&&(e.sended&&(a="Compra - Sa\xedda"),e.sended||(a="Compra - Entrada")),r.a.createElement(p.TableRow,{key:e.currency+e.date+t},r.a.createElement(p.TableCell,{style:e.sended?{color:"red"}:{}},x()(e.date).format("DD/MM/YYYY HH:MM")),r.a.createElement(p.TableCell,{style:e.sended?{color:"red"}:{}},e.currency),r.a.createElement(p.TableCell,{style:e.sended?{color:"red"}:{}},n.format(e.value)),r.a.createElement(p.TableCell,{style:e.sended?{color:"red"}:{}},a),r.a.createElement(p.TableCell,{style:e.sended?{color:"red"}:{}},e.description))})))))}}]),t}(n.Component),L=D()()(k),q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,accounts:new Array,from:"",to:"",value:0,description:"",currency:""},a.componentWillMount=function(){g.getDataList("accounts",function(e){a.setState({accounts:e,loading:!1})})},a.submit=function(e){e.preventDefault();var t=a.state,n=t.accounts,r=t.from,c=t.to,l=t.description,i=t.value,u=t.currency,s=n.find(function(e){return e.id===r}),d=n.find(function(e){return e.id===c});if(s&&d){var m,p=(s.balances||new Array).map(function(e){if(e.code===u){var t=e.transactions||new Array;return Object(o.a)({},e,{value:e.value-i,transactions:t.concat([{date:(new Date).toISOString(),sended:!0,type:"TRANSFER",value:i,currency:u,to:c,from:r,description:l}])})}return e}),y=d.balances||new Array;m=y.some(function(e){return e.code===u})?y.map(function(e){if(e.code===u){var t=e.transactions||new Array;return Object(o.a)({},e,{value:e.value+i,transactions:t.concat([{date:(new Date).toISOString(),sended:!1,type:"TRANSFER",value:i,currency:u,to:c,from:r,description:l}])})}return e}):y.concat([{value:i,code:u,transactions:[{date:(new Date).toISOString(),sended:!1,type:"TRANSFER",value:i,currency:u,to:c,from:r,description:l}]}]);var f=[g.updateData(r,"accounts",Object(o.a)({},s,{balances:p})),g.updateData(c,"accounts",Object(o.a)({},d,{balances:m}))];Promise.all(f).then(function(){return a.props.history.push(b.accountsList.path)})}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.accounts,c=t.from,l=t.to,o=t.currency,i=t.value,u=t.description;console.log(l);var s=!!c&&n.find(function(e){return e.id===c}),d=s&&s.balances?s.balances:[];return a?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},"Criar transa\xe7\xe3o entre contas"),r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(p.Select,{value:c,onChange:function(t){return e.setState({from:t.target.value,to:"",currency:""})},displayEmpty:!0,fullWidth:!0,name:"De",style:{marginTop:16}},r.a.createElement(p.MenuItem,{value:""},r.a.createElement("em",null,"Selecione a conta que ir\xe1 enviar")),n.map(function(e){return r.a.createElement(p.MenuItem,{value:e.id},e.description)})),r.a.createElement(p.Select,{value:l,onChange:function(t){return e.setState({to:t.target.value})},disabled:!c,displayEmpty:!0,fullWidth:!0,name:"De",style:{marginTop:16}},r.a.createElement(p.MenuItem,{value:""},r.a.createElement("em",null,"Selecione a conta que ir\xe1 receber")),n.filter(function(e){return e.id!==c}).map(function(e){return r.a.createElement(p.MenuItem,{value:e.id},e.description)})),r.a.createElement(p.Select,{value:o,onChange:function(t){return e.setState({currency:t.target.value})},disabled:!c,displayEmpty:!0,fullWidth:!0,name:"Moeda",style:{marginTop:16}},r.a.createElement(p.MenuItem,{value:""},r.a.createElement("em",null,"Selecione a moeda da transa\xe7\xe3o")),d.map(function(e){var t=new Intl.NumberFormat("pt-BR",{style:"currency",currency:e.code}),a=E.find(function(t){return t.code===e.code});return r.a.createElement(p.MenuItem,{value:e.code},"".concat(a?a.singular:e.code," (Valor m\xe1ximo: ").concat(t.format(e.value),")"))})),r.a.createElement(p.TextField,{type:"number",value:i,label:"Valor",fullWidth:!0,required:!0,style:{marginTop:16},onChange:function(t){return e.setState({value:+t.target.value})}}),r.a.createElement(p.TextField,{type:"text",value:u,label:"Descri\xe7\xe3o",fullWidth:!0,required:!0,style:{marginTop:16},onChange:function(t){return e.setState({description:t.target.value})}}),r.a.createElement(p.Button,{type:"submit",color:"primary",style:{marginTop:"20px",display:"inline-block"}},"Transferir")))))}}]),t}(n.Component),N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,accounts:new Array,from:"",to:"",value:0,description:"",currency:""},a.componentWillMount=function(){g.getDataList("accounts",function(e){a.setState({accounts:e,loading:!1})})},a.submit=function(e){e.preventDefault();var t=a.state,n=t.accounts,r=t.from,c=t.description,l=t.value,i=t.currency,u=a.props.isEntry,s=n.find(function(e){return e.id===r});if(s){var d,m=s.balances||new Array;d=m.some(function(e){return e.code===i})?m.map(function(e){if(e.code===i){var t=e.transactions||new Array;return Object(o.a)({},e,{value:u?e.value+l:e.value-l,transactions:t.concat([{date:(new Date).toISOString(),type:"MOVEMENT",sended:!u,value:l,currency:i,from:r,description:c}])})}return e}):m.concat([{value:l,code:i,transactions:[{date:(new Date).toISOString(),type:"MOVEMENT",sended:!u,value:l,currency:i,from:r,description:c}]}]),g.updateData(r,"accounts",Object(o.a)({},s,{balances:d})).then(function(){a.props.history.push(S.path)})}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.accounts,c=t.from,l=t.currency,o=t.value,i=t.description,u=this.props.isEntry,s=!!c&&n.find(function(e){return e.id===c}),d=s&&s.balances?s.balances:[];return a?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Card,{style:{marginLeft:"2%",marginRight:"2%",marginTop:"2%"}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},u?"Adicionar Entrada":"Adicioanr Sa\xedda"),r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(p.Select,{value:c,onChange:function(t){return e.setState({from:t.target.value,currency:""})},displayEmpty:!0,fullWidth:!0,name:"De",style:{marginTop:16}},r.a.createElement(p.MenuItem,{value:""},r.a.createElement("em",null,"Selecione a conta")),n.map(function(e){return r.a.createElement(p.MenuItem,{value:e.id},e.description)})),r.a.createElement(p.Select,{value:l,onChange:function(t){return e.setState({currency:t.target.value})},disabled:!c,displayEmpty:!0,fullWidth:!0,name:"Moeda",style:{marginTop:16}},r.a.createElement(p.MenuItem,{value:""},r.a.createElement("em",null,"Selecione a moeda")),!u&&d.map(function(e){var t=new Intl.NumberFormat("pt-BR",{style:"currency",currency:e.code}),a=E.find(function(t){return t.code===e.code});return r.a.createElement(p.MenuItem,{value:e.code},"".concat(a?a.singular:e.code," (Valor m\xe1ximo: ").concat(t.format(e.value),")"))}),u&&E.map(function(e){return r.a.createElement(p.MenuItem,{value:e.code},e.singular)})),r.a.createElement(p.TextField,{type:"number",value:o,label:"Valor",fullWidth:!0,required:!0,style:{marginTop:16},onChange:function(t){return e.setState({value:+t.target.value})}}),r.a.createElement(p.TextField,{type:"text",value:i,label:"Descri\xe7\xe3o",fullWidth:!0,required:!0,style:{marginTop:16},onChange:function(t){return e.setState({description:t.target.value})}}),r.a.createElement(p.Button,{type:"submit",color:"primary",style:{marginTop:"20px",display:"inline-block"}},u?"Adicionar entrada":"Adicionar sa\xedda")))))}}]),t}(n.Component),W=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(N,Object.assign({isEntry:!0},this.props))}}]),t}(n.Component),V=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(N,this.props)}}]),t}(n.Component),P=(Object.keys(b)||[]).map(function(e){return b[e]}),H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).MenuRenderer=function(e){return r.a.createElement(p.Card,{style:{margin:"16px"}},r.a.createElement(p.CardActionArea,{onClick:function(){return a.props.history.push(e.path)}},r.a.createElement(p.CardContent,null,r.a.createElement(p.Typography,{variant:"headline",component:"h2"},e.name))))},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,P.map(function(t){return r.a.createElement(e.MenuRenderer,{key:t.path,name:t.name,path:t.path})}))}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={account:null,loading:!0},a.componentWillMount=function(){var e=a.props.match.params.id;g.getUniqueDataBy("accounts",e,function(t){a.setState({account:Object(o.a)({},t,{id:e}),loading:!1})})},a.sortFunction=function(e,t){return+(t.date>e.date)-(t.date<e.date)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.code,t=this.state,a=t.account;if(t.loading||!a)return null;var n=(a||{}).balances,c=((void 0===n?[]:n)||[]).reduce(function(e,t){return e.concat(t.transactions||[])},new Array),l=c.filter(function(t){return t.currency===e&&"TRANSACTION"===t.type&&t.to===a.id&&t.sended});if(!l||!l.length)return r.a.createElement("div",{style:{padding:16}},r.a.createElement("p",null,"Sem transa\xe7\xf5es de venda"));var o=l.reduce(function(e,t){return e+t.value},0),i=l.reduce(function(e,t){return e+t.value*t.quotation},0),u=new Intl.NumberFormat("pt-BR",{style:"currency",currency:l[0].currency}),s=l[0].currency;return r.a.createElement("div",{style:{paddingBottom:16}},!!c&&!!c.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Typography,{style:{padding:8},variant:"headline",component:"h2"},"Movimenta\xe7\xf5es vinculadas com essa conta"),r.a.createElement(p.Table,null,r.a.createElement(p.TableHead,null,r.a.createElement(p.TableRow,null,r.a.createElement(p.TableCell,null,"Data"),r.a.createElement(p.TableCell,null,"Moeda"),r.a.createElement(p.TableCell,null,"Valor"),r.a.createElement(p.TableCell,null,"Cota\xe7\xe3o"),r.a.createElement(p.TableCell,null,"Tipo"),r.a.createElement(p.TableCell,null,"Descri\xe7\xe3o"))),r.a.createElement(p.TableBody,null,l.sort(this.sortFunction).map(function(e,t){var a;return"INITIAL"===e.type?a="Dep\xf3sto inicial":"MOVEMENT"===e.type?(e.sended&&(a="Sa\xedda"),e.sended||(a="Entrada")):"TRANSFER"===e.type?(e.sended&&(a="Transfer\xeancia - Sa\xedda"),e.sended||(a="Transfer\xeancia - Entrada")):"TRANSACTION"===e.type&&(e.sended&&(a="Compra - Sa\xedda"),e.sended||(a="Compra - Entrada")),r.a.createElement(p.TableRow,{key:e.currency+e.date+t},r.a.createElement(p.TableCell,null,x()(e.date).format("DD/MM/YYYY HH:MM")),r.a.createElement(p.TableCell,null,e.currency),r.a.createElement(p.TableCell,null,u.format(e.value)),r.a.createElement(p.TableCell,null,e.quotation),r.a.createElement(p.TableCell,null,a),r.a.createElement(p.TableCell,null,e.description))}),r.a.createElement(p.TableRow,{key:"last",style:{backgroundColor:"#EEE"}},r.a.createElement(p.TableCell,{style:{fontWeight:"bold"}},"M\xe9dia"),r.a.createElement(p.TableCell,{style:{fontWeight:"bold"}},s),r.a.createElement(p.TableCell,{style:{fontWeight:"bold"}},u.format(o)),r.a.createElement(p.TableCell,{style:{fontWeight:"bold"}},i/o),r.a.createElement(p.TableCell,{style:{fontWeight:"bold"}},"-"),r.a.createElement(p.TableCell,{style:{fontWeight:"bold"}},"-"))))))}}]),t}(n.Component),Y=D()()(G),U=a(161),z=a.n(U),J=a(73),Q=a(46),K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.AppBar,{position:"static",style:{marginBottom:16}},r.a.createElement(p.Toolbar,null,r.a.createElement(p.IconButton,{color:"inherit","aria-label":"Menu",component:function(e){return r.a.createElement(J.b,Object.assign({to:"".concat(S.path)},e))}},r.a.createElement(z.a,null)),r.a.createElement(p.Typography,{variant:"h6",color:"inherit"},"Controle de carteiras"))),r.a.createElement(Q.a,{exact:!0,path:S.path,render:function(e){return r.a.createElement(H,e)}}),r.a.createElement(Q.a,{exact:!0,path:T.path,render:function(e){return r.a.createElement(A,e)}}),r.a.createElement(Q.a,{exact:!0,path:b.accountsList.path,render:function(e){return r.a.createElement(R,e)}}),r.a.createElement(Q.a,{exact:!0,path:b.accountsTransaction.path,render:function(e){return r.a.createElement(F,e)}}),r.a.createElement(Q.a,{exact:!0,path:O.path,render:function(e){return r.a.createElement(L,e)}}),r.a.createElement(Q.a,{exact:!0,path:b.accountsTransfer.path,render:function(e){return r.a.createElement(q,e)}}),r.a.createElement(Q.a,{exact:!0,path:b.accountsEntry.path,render:function(e){return r.a.createElement(W,e)}}),r.a.createElement(Q.a,{exact:!0,path:b.accountsOut.path,render:function(e){return r.a.createElement(V,e)}}),r.a.createElement(Q.a,{exact:!0,path:b.accountsForm.path,render:function(e){return r.a.createElement(A,e)}}),r.a.createElement(Q.a,{exact:!0,path:C.path,render:function(e){return r.a.createElement(Y,e)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(J.a,null,r.a.createElement(Q.a,{path:S.path,component:K})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[162,1,2]]]);
//# sourceMappingURL=main.9144db36.chunk.js.map